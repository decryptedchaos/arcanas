import{f as h,e as D,b as c,d as ue,s as v,t as M}from"../chunks/CxsSqunw.js";import{i as ge}from"../chunks/Cm5mOaJu.js";import{F as ye,G as me,I as jt,J as fe,K as r,M as e,N as t,j as a,m as ut,k as u,O as g,t as et,Q as b}from"../chunks/nQRq2lGW.js";import{i as y}from"../chunks/BAUvmEh2.js";import{r as _,e as zt,i as Bt,s as Lt}from"../chunks/DJXuwkbn.js";import{s as be}from"../chunks/BN11tLjS.js";import{b as Rt,a as I,p as _e}from"../chunks/rcAmZXc-.js";import{n as St}from"../chunks/lY0_PU-D.js";var he=h('<div class="flex items-center justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div></div>'),ke=h('<div class="text-center py-12"><svg class="h-12 w-12 text-gray-400 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg> <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No NFS exports found</h3> <p class="text-gray-600 dark:text-gray-300 mb-4">Create your first NFS export to get started.</p></div>'),we=h('<span class="px-2 py-1 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded border border-gray-200 dark:border-gray-600"> </span>'),Ce=h('<div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"><div class="flex items-center space-x-3"><span> </span> <span class="text-sm font-medium text-gray-900 dark:text-white"> </span></div> <div class="flex flex-wrap gap-1"></div></div>'),Me=h('<div class="card hover:shadow-lg transition-shadow"><div class="flex items-start justify-between"><div class="flex-1"><div class="flex items-center space-x-3 mb-3"><h4 class="text-lg font-semibold text-gray-900 dark:text-white"> </h4> <span class="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-600"> </span></div> <div class="mb-4"><div class="flex items-center justify-between text-sm mb-2"><span class="text-gray-600 dark:text-gray-300"> </span> <span class="font-medium text-gray-900 dark:text-white"> </span></div> <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"><div></div></div></div> <div class="mb-4"><p class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Client Access Rules:</p> <div class="space-y-2"></div></div> <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm mb-4"><div><p class="text-gray-600 dark:text-gray-300">Filesystem</p> <p class="font-medium text-gray-900 dark:text-white"> </p></div> <div><p class="text-gray-600 dark:text-gray-300">Total Clients</p> <p class="font-medium text-gray-900 dark:text-white"> </p></div> <div><p class="text-gray-600 dark:text-gray-300">Active Connections</p> <p class="font-medium text-gray-900 dark:text-white"> </p></div></div> <div class="flex items-center space-x-6 text-xs text-gray-500"><span> </span> <span> </span></div></div> <div class="flex space-x-2 ml-4"><button class="p-2 text-gray-400 hover:text-gray-600 dark:text-gray-300" title="Edit"><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="p-2 text-gray-400 hover:text-red-600" title="Delete"><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div></div>'),Fe=h('<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"><div class="stat-card"><div class="flex items-center"><div class="p-3 bg-blue-100 rounded-lg mr-4"><svg class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg></div> <div><p class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Exports</p> <p class="text-2xl font-bold text-gray-900 dark:text-white"> </p></div></div></div> <div class="stat-card"><div class="flex items-center"><div class="p-3 bg-purple-100 rounded-lg mr-4"><svg class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div> <div><p class="text-sm font-medium text-gray-600 dark:text-gray-300">Active Connections</p> <p class="text-2xl font-bold text-gray-900 dark:text-white"> </p></div></div></div> <div class="stat-card"><div class="flex items-center"><div class="p-3 bg-green-100 rounded-lg mr-4"><svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div><p class="text-sm font-medium text-gray-600 dark:text-gray-300">Read-Write Access</p> <p class="text-2xl font-bold text-gray-900 dark:text-white"> </p></div></div></div> <div class="stat-card"><div class="flex items-center"><div class="p-3 bg-orange-100 rounded-lg mr-4"><svg class="h-6 w-6 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"></path></svg></div> <div><p class="text-sm font-medium text-gray-600 dark:text-gray-300">Total Size</p> <p class="text-2xl font-bold text-gray-900 dark:text-white">6.5TB</p></div></div></div></div> <div class="space-y-4"><h3 class="text-lg font-semibold text-gray-900 dark:text-white">Export Details</h3> <!></div>',1),Ne=h('<div class="fixed inset-0 z-50 overflow-y-auto"><div class="flex items-center justify-center min-h-screen px-4"><div class="fixed inset-0 bg-gray-500 bg-opacity-75" role="button" tabindex="0" aria-label="Close modal"></div> <div class="relative bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6"><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Create NFS Export</h3> <form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="export-path" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Export Path</label> <input id="export-path" type="text" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 text-gray-900 dark:text-white" placeholder="/data/share"/></div> <div><label for="client-network" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Client Network</label> <input id="client-network" type="text" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 text-gray-900 dark:text-white" placeholder="192.168.1.0/24"/></div></div> <div class="space-y-3"><fieldset class="space-y-3"><legend class="block text-sm font-medium text-gray-700 dark:text-gray-300">Export Options:</legend> <div class="grid grid-cols-2 gap-3"><label class="flex items-center"><input type="checkbox" class="mr-2 dark:bg-gray-700 dark:border-gray-600"/> <span class="text-sm text-gray-700 dark:text-gray-300">rw (read-write)</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2 dark:bg-gray-700 dark:border-gray-600"/> <span class="text-sm text-gray-700 dark:text-gray-300">sync</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2 dark:bg-gray-700 dark:border-gray-600"/> <span class="text-sm text-gray-700 dark:text-gray-300">no_subtree_check</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2 dark:bg-gray-700 dark:border-gray-600"/> <span class="text-sm text-gray-700 dark:text-gray-300">no_root_squash</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2 dark:bg-gray-700 dark:border-gray-600"/> <span class="text-sm text-gray-700 dark:text-gray-300">async</span></label> <label class="flex items-center"><input type="checkbox" class="mr-2 dark:bg-gray-700 dark:border-gray-600"/> <span class="text-sm text-gray-700 dark:text-gray-300">crossmnt</span></label></div></fieldset></div> <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"><p class="text-sm text-gray-600 dark:text-gray-300 mb-2"><strong>Preview export line:</strong></p> <code class="text-sm bg-gray-800 dark:bg-gray-900 text-gray-100 px-3 py-2 rounded block"> <!><!><!><!><!><!>)</code></div> <div class="flex justify-end space-x-3 pt-4"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary">Create Export</button></div></form></div></div></div>'),Ee=h('<div class="space-y-6 overflow-hidden"><div class="flex items-center justify-between"><div><h2 class="text-xl font-bold text-gray-900 dark:text-white">NFS Exports</h2> <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">Manage Network File System exports</p></div> <button class="btn btn-primary"><svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Create Export</button></div> <!></div> <!>',1);function je(gt,Vt){ye(Vt,!1);let k=ut([]),yt=ut(!0),F=ut(!1),qt=null,o=ut({path:"",clientNetwork:"192.168.1.0/24",options:{rw:!0,sync:!0,no_subtree_check:!1,no_root_squash:!1,async:!1,crossmnt:!1}});async function at(){try{u(yt,!0),qt=null,u(k,await St.getExports())}catch(i){qt=i.message,console.error("Failed to load NFS exports:",i),u(k,[{id:1,path:"/data/media",clients:[{network:"192.168.1.0/24",options:"rw,sync,no_subtree_check",access:"read-write"},{network:"10.0.0.100",options:"ro,sync,no_subtree_check",access:"read-only"}],filesystem:"/dev/sdb1",size:"2TB",used:"1.8TB",active_connections:3,created:"2024-01-15",last_modified:"2024-12-07 09:30:00"}])}finally{u(yt,!1)}}me(()=>{at();const i=setInterval(at,3e4);return()=>clearInterval(i)});function Jt(i){switch(i){case"read-write":return"text-green-600 bg-green-100";case"read-only":return"text-blue-600 bg-blue-100";default:return"text-gray-600 dark:text-gray-300 bg-gray-100"}}function Kt(i){return i>=90?"bg-red-500":i>=75?"bg-yellow-500":"bg-green-500"}async function Qt(){try{const i=[];a(o).options.rw?i.push("rw"):i.push("ro"),a(o).options.sync&&i.push("sync"),a(o).options.no_subtree_check&&i.push("no_subtree_check"),a(o).options.no_root_squash&&i.push("no_root_squash"),a(o).options.async&&i.push("async"),a(o).options.crossmnt&&i.push("crossmnt");const l={path:a(o).path,clients:[{network:a(o).clientNetwork,options:i.join(","),access:a(o).options.rw?"read-write":"read-only"}]};await St.createExport(l),u(F,!1),mt(),await at()}catch(i){console.error("Failed to create export:",i),alert("Failed to create NFS export")}}async function Wt(i){if(confirm("Are you sure you want to delete this NFS export?"))try{await St.deleteExport(i),await at()}catch(l){console.error("Failed to delete export:",l),alert("Failed to delete NFS export")}}function mt(){u(o,{path:"",clientNetwork:"192.168.1.0/24",options:{rw:!0,sync:!0,no_subtree_check:!1,no_root_squash:!1,async:!1,crossmnt:!1}})}function Xt(i){return i.split(",").map(l=>l.trim())}function ft(i,l){const N=parseFloat(i.replace(/[^\d.]/g,"")),w=parseFloat(l.replace(/[^\d.]/g,""));return Math.round(N/w*100)}ge();var At=Ee(),bt=jt(At),_t=e(bt),Yt=r(e(_t),2);t(_t);var Zt=r(_t,2);{var te=i=>{var l=he();c(i,l)},ee=i=>{var l=ue(),N=jt(l);{var w=p=>{var m=ke();c(p,m)},rt=p=>{var m=Fe(),C=jt(m),E=e(C),G=e(E),O=r(e(G),2),j=r(e(O),2),st=e(j,!0);t(j),t(O),t(G),t(E);var z=r(E,2),B=e(z),P=r(e(B),2),S=r(e(P),2),ot=e(S,!0);t(S),t(P),t(B),t(z);var q=r(z,2),U=e(q),A=r(e(U),2),L=r(e(A),2),R=e(L,!0);t(L),t(A),t(U),t(q),g(2),t(C);var V=r(C,2),it=r(e(V),2);zt(it,1,()=>a(k),Bt,(x,n)=>{var f=Me(),J=e(f),H=e(J),K=e(H),Q=e(K),nt=e(Q,!0);t(Q);var dt=r(Q,2),lt=e(dt);t(dt),t(K);var W=r(K,2),T=e(W),X=e(T),ct=e(X);t(X);var vt=r(X,2),ht=e(vt);t(vt),t(T);var pt=r(T,2),Y=e(pt);t(pt),t(W);var Z=r(W,2),s=r(e(Z),2);zt(s,5,()=>a(n).clients,Bt,(Mt,$)=>{var tt=Ce(),Ft=e(tt),xt=e(Ft),ce=e(xt,!0);t(xt);var Pt=r(xt,2),ve=e(Pt,!0);t(Pt),t(Ft);var Ut=r(Ft,2);zt(Ut,5,()=>Xt(a($).options),Bt,(Nt,pe)=>{var Et=we(),xe=e(Et,!0);t(Et),et(()=>v(xe,a(pe))),c(Nt,Et)}),t(Ut),t(tt),et(Nt=>{Lt(xt,1,`px-2 py-1 text-xs font-medium rounded-full ${Nt??""}`),v(ce,a($).access),v(ve,a($).network)},[()=>Jt(a($).access)]),c(Mt,tt)}),t(s),t(Z);var d=r(Z,2),kt=e(d),Ht=r(e(kt),2),se=e(Ht,!0);t(Ht),t(kt);var wt=r(kt,2),Tt=r(e(wt),2),oe=e(Tt,!0);t(Tt),t(wt);var $t=r(wt,2),Dt=r(e($t),2),ie=e(Dt,!0);t(Dt),t($t),t(d);var It=r(d,2),Ct=e(It),ne=e(Ct);t(Ct);var Gt=r(Ct,2),de=e(Gt);t(Gt),t(It),t(H);var Ot=r(H,2),le=r(e(Ot),2);t(Ot),t(J),t(f),et((Mt,$,tt)=>{v(nt,a(n).path),v(lt,`${a(n).active_connections??""} connections`),v(ct,`Usage: ${a(n).used??""} / ${a(n).size??""}`),v(ht,`${Mt??""}%`),Lt(Y,1,`${$??""} h-3 rounded-full transition-all duration-500`),be(Y,`width: ${tt??""}%`),v(se,a(n).filesystem),v(oe,a(n).clients.length),v(ie,a(n).active_connections),v(ne,`Created: ${a(n).created??""}`),v(de,`Modified: ${a(n).last_modified??""}`)},[()=>ft(a(n).used,a(n).size),()=>Kt(ft(a(n).used,a(n).size)),()=>ft(a(n).used,a(n).size)]),D("click",le,()=>Wt(a(n).path)),c(x,f)}),t(V),et((x,n)=>{v(st,a(k).length),v(ot,x),v(R,n)},[()=>a(k).reduce((x,n)=>x+n.active_connections,0),()=>a(k).reduce((x,n)=>x+n.clients.filter(f=>f.access==="read-write").length,0)]),c(p,m)};y(N,p=>{a(k).length===0?p(w):p(rt,!1)},!0)}c(i,l)};y(Zt,i=>{a(yt)?i(te):i(ee,!1)})}t(bt);var ae=r(bt,2);{var re=i=>{var l=Ne(),N=e(l),w=e(N),rt=r(w,2),p=r(e(rt),2),m=e(p),C=e(m),E=r(e(C),2);_(E),t(C);var G=r(C,2),O=r(e(G),2);_(O),t(G),t(m);var j=r(m,2),st=e(j),z=r(e(st),2),B=e(z),P=e(B);_(P),g(2),t(B);var S=r(B,2),ot=e(S);_(ot),g(2),t(S);var q=r(S,2),U=e(q);_(U),g(2),t(q);var A=r(q,2),L=e(A);_(L),g(2),t(A);var R=r(A,2),V=e(R);_(V),g(2),t(R);var it=r(R,2),x=e(it);_(x),g(2),t(it),t(z),t(st),t(j);var n=r(j,2),f=r(e(n),2),J=e(f),H=r(J);{var K=s=>{var d=M("rw");c(s,d)},Q=s=>{var d=M("ro");c(s,d)};y(H,s=>{a(o).options.rw?s(K):s(Q,!1)})}var nt=r(H);{var dt=s=>{var d=M(",sync");c(s,d)};y(nt,s=>{a(o).options.sync&&s(dt)})}var lt=r(nt);{var W=s=>{var d=M(",no_subtree_check");c(s,d)};y(lt,s=>{a(o).options.no_subtree_check&&s(W)})}var T=r(lt);{var X=s=>{var d=M(",no_root_squash");c(s,d)};y(T,s=>{a(o).options.no_root_squash&&s(X)})}var ct=r(T);{var vt=s=>{var d=M(",async");c(s,d)};y(ct,s=>{a(o).options.async&&s(vt)})}var ht=r(ct);{var pt=s=>{var d=M(",crossmnt");c(s,d)};y(ht,s=>{a(o).options.crossmnt&&s(pt)})}g(),t(f),t(n);var Y=r(n,2),Z=e(Y);g(2),t(Y),t(p),t(rt),t(N),t(l),et(()=>v(J,`${a(o).path??""} ${a(o).clientNetwork??""}(`)),D("click",w,()=>{u(F,!1),mt()}),D("keydown",w,s=>s.key==="Escape"&&u(F,!1)),Rt(E,()=>a(o).path,s=>b(o,a(o).path=s)),Rt(O,()=>a(o).clientNetwork,s=>b(o,a(o).clientNetwork=s)),I(P,()=>a(o).options.rw,s=>b(o,a(o).options.rw=s)),I(ot,()=>a(o).options.sync,s=>b(o,a(o).options.sync=s)),I(U,()=>a(o).options.no_subtree_check,s=>b(o,a(o).options.no_subtree_check=s)),I(L,()=>a(o).options.no_root_squash,s=>b(o,a(o).options.no_root_squash=s)),I(V,()=>a(o).options.async,s=>b(o,a(o).options.async=s)),I(x,()=>a(o).options.crossmnt,s=>b(o,a(o).options.crossmnt=s)),D("click",Z,()=>{u(F,!1),mt()}),D("submit",p,_e(Qt)),c(i,l)};y(ae,i=>{a(F)&&i(re)})}D("click",Yt,()=>u(F,!0)),c(gt,At),fe()}function De(gt){je(gt,{})}export{De as component};
